<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.sng.gdrs.model.dao.IAdminInfoDao">

	<!-- 지원자 전체 조회 -->
	<select id="acAllList" resultType="">
		SELECT rm.SEQ, r.TITLE, r.EMPLOY, u.NAME, a.TITLE,
			a.REGDATE, rm.SUBMITDATE, rm.STEP, rm."RESULT"
		FROM RECRUITMANAGEMENT rm
			JOIN APPLICATION a ON a.SEQ = rm.AP_SEQ
			JOIN USERINFO u ON a.EMAIL = u.EMAIL
			JOIN RECRUITMENT r ON a.RECRUIT_SEQ = r.SEQ
	</select>

	<!-- 지원자가 선택한 공고에 지원서를 제출하면 추가 지원자 리스트에 추가됨 -->
	<insert id="acUserInsert" parameterType="">
		INSERT INTO RECRUITMANAGEMENT (SEQ, AP_SEQ, STEP, "RESULT", ETC, SUBMITDATE)
		VALUES(RECRUITMANAGEMENT_SEQ.NEXTVAL, 4, 'STP001', 'RST001', '', SYSDATE)
	</insert>

	<!-- 선택한 공고의 지원자를 모두 조회 -->
	<select id="acUserList" parameterType="" resultType="">
		SELECT rm.SEQ, r.TITLE, r.EMPLOY,
			u.NAME, a.TITLE, a.REGDATE,
			rm.SUBMITDATE, rm.STEP, rm."RESULT"
		FROM RECRUITMANAGEMENT rm
			JOIN APPLICATION a ON a.SEQ = rm.AP_SEQ
			JOIN USERINFO u ON a.EMAIL = u.EMAIL
			JOIN RECRUITMENT r ON a.RECRUIT_SEQ = r.SEQ
		WHERE r.SEQ = 7
	</select>

	<!-- 선택한 지원자 상세보기 -->
	<select id="acAdminDetail" parameterType="" resultType="">
		SELECT u.EMAIL , u.NAME , u.BIRTH , a.TITLE ,
			a.SEQ AP_SEQ, a.REGDATE , a.RECRUIT_SEQ , a.INTRODUCE ,
			a.PORTPOLIO_LINK , a.PORTPOLIO_FILE , a.REWARDING ,
			a.HANDICAP , a.MILITARY , r.STEP , r."RESULT" ,
			r.ETC , r.SUBMITDATE
		FROM USERINFO u
			JOIN APPLICATION a ON u.EMAIL = a.EMAIL
			JOIN RECRUITMANAGEMENT r ON a.SEQ = r.AP_SEQ
		WHERE u.EMAIL = 'test01@google.com'
	</select>

	<!-- 지원자 상세보기 경력정보 -->
	<select id="acAdminDetailCareer" parameterType="" resultType="">
		SELECT AP_SEQ , CORPNAME , HIREDATE , FIREDATE ,
			EMPLOY , "POSITION" , "WORK"
		FROM CAREER c
		WHERE AP_SEQ ='4'
	</select>

	<!-- 지원자 상세보기 프로젝트경험 -->
	<select id="acAdminDetailPjt" parameterType="" resultType="">
		SELECT AP_SEQ , TITLE , STARTDATE , ENDDATE , CORPNAME , JOB , CONTENT
		FROM PROJECTEXP p
		WHERE AP_SEQ ='4'
	</select>

	<!-- 지원자 상세보기 자격증, 수상정보 -->
	<select id="acAdminDetailCert" parameterType="" resultType="">
		SELECT AP_SEQ , "TYPE" , NAME , AGENCY , GRADE , REGDATE
		FROM CERTIFICATE c
		WHERE AP_SEQ ='4'
	</select>

	<!-- 지원자 상세보기 학력정보 -->
	<select id="acAdminDetailEdu" parameterType="" resultType="">
		SELECT AP_SEQ , FINALEDU , NAME , MAJOR , SCORE , INDATE , OUTDATE , STATUS
		FROM EDUCATION e
		WHERE AP_SEQ ='4'
	</select>

	<!-- 선택한 지원자의 채용 진행단계 변경 -->
	<update id="acStep" parameterType="">
		UPDATE RECRUITMANAGEMENT
		SET STEP='STP002'
		WHERE SEQ=2
	</update>

	<!-- 선택한 지원자의 채용 결과 변경 -->
	<update id="acResult" parameterType="">
		UPDATE RECRUITMANAGEMENT
		SET "RESULT" ='RST002'
		WHERE SEQ=2
	</update>

	<!-- 관리자가 여러 지원자를 다중 선택하여 일괄적으로 진행 결과를 변경 -->
	<update id="acMultiStep" parameterType="">
		UPDATE RECRUITMANAGEMENT
		SET STEP = 'STP003'
		WHERE SEQ IN ('2', '3')
	</update>

	<!-- 관리자가 여러 지원자를 다중 선택하여 일괄적으로 채용 결과를 변경 -->
	<update id="acMultiResult" parameterType="">
		UPDATE RECRUITMANAGEMENT
		SET "RESULT" = 'RST001'
		WHERE SEQ IN ('2', '5', '6')
	</update>

	<!-- 관리자가 특정 지원자의 주석을 추가할 수 있다. -->
	<update id="acComment" parameterType="">	
		UPDATE RECRUITMANAGEMENT
		SET ETC = '고양이를 좋아함'
		WHERE SEQ = '2'
	</update>

</mapper>
